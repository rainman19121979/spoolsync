<!doctype html><meta charset="utf-8">
<title>SpoolSync – Einstellungen</title>
<style>
 body{font-family:sans-serif;max-width:720px;margin:20px auto;padding:1rem}
 label{display:block;margin:.4rem 0 .2rem}
 input[type=text],input[type=number],input[type=password]{width:100%;padding:.4rem}
 .btn{display:inline-block;padding:.5rem .8rem;border:1px solid #444;border-radius:8px;text-decoration:none}
</style>
<h1>Einstellungen</h1>
{% if request.query_params.get('saved') %}<p style="color:green">Gespeichert.</p>{% endif %}

<form method="post" action="/settings">
  <label>Spoolman API Base</label>
  <input name="SPOOLMAN_BASE" type="text" value="{{cfg.SPOOLMAN_BASE}}">
  <label>SimplyPrint API Base</label>
  <input name="SP_BASE" type="text" value="{{cfg.SP_BASE}}">
  <label>SimplyPrint Token {% if cfg.SP_TOKEN_SET %}(• gespeichert){% endif %}</label>
  <input name="SP_TOKEN" type="password" placeholder="{% if cfg.SP_TOKEN_SET %}••••••••{% else %}Token eintragen{% endif %}">
  <label>Sync-Intervall (Sek.)</label>
  <input name="SYNC_INTERVAL_SECONDS" type="number" min="30" value="{{cfg.SYNC_INTERVAL_SECONDS}}">
  <label>Epsilon (g)</label>
  <input name="EPSILON_GRAMS" type="number" step="0.01" min="0.01" value="{{cfg.EPSILON_GRAMS}}">
  <label><input type="checkbox" name="DRY_RUN" value="true" {% if cfg.DRY_RUN=='true' %}checked{% endif %}> Dry-Run (nur lesen)</label>
  <p><button class="btn" type="submit">Speichern</button> <a class="btn" href="/">Zurück</a></p>
</form>

<form method="post" action="/settings/test">
  <button class="btn">Verbindungen testen</button>
</form>
